<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    
    <!-- security other urls usage -->
    
    <!-- end -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tac+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/cart.css">

    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tac+One&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script type="text/javascript"
      src="https://app.sandbox.midtrans.com/snap/snap.js"
      data-client-key="SB-Mid-client-wv2JFj0ARbY97X75"></script>
    <title>FOOD4UNIQUE - MY CART</title>
</head>

<body>

<%- include("loader.ejs") %>


<div class="home hide">
    <div class="success"></div>
    <div class="error"></div>
<header class="offcanvas-menu">
        <input type="checkbox" id="toogle-menu" />
    
        <label for="toogle-menu" class="toogle-open"><span></span></label>
    
        <%- include("nav.ejs") %>
</header>

<div id="cart_page" class="container">
    <div class="row">

        <% if(products.length === 0) { %>
           <div style="width: 100vw;height: 100vh;" class="container>
               <div class="row" style="width: 100%;height: 100%;">
                   <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;width: 100%;" class="col-md-12">
                       <img style="width: auto;height: auto;object-fit: cover;" src="./images/cart_empty.gif" alt="">
                       <a class="mt-5" style="font-size: 25px;color: #000;" href="/food">Explore & Add To Cart</a>
                   </div>
               </div>
           </div>
        <% }else{ %>

            <% for(let i = 0; i < products.length; i++) { %>

                <input id="products" value="<%= products %>"hidden type="text">
            
                <div class="col-md-12 mt-5" style="display:flex;justify-content: space-between;align-items: center;border-bottom: 1px solid gray;">
                    <div style="display: flex;flex-direction: column;justify-content: center;">
    
                        
    
                        <img style="width: 200px;height: 200px;object-fit: contain;" src="<%= products[i].food.images[0] %>" alt="">
    
                        <div style="display: flex;justify-content: space-between;font-size: 20px;margin-top: 15px;margin-bottom: 10px;">
                            <p><%= products[i].food.name %></p>
    
                            <p style="color: #fff;background-color: #000;padding: 4px;">qty:<%= products[i].qty %></p>
    
    
                            <p><%= products[i].food.price %></p>
                        </div>
                        <div id="update_qty_container" class="d-flex mb-5">
                            <input 
                            style="outline: none;border-top: none;border-left: none;border-right: none;border-bottom: 1px solid #000;font-size: 20px;"
                            placeholder="quantity" id="update_qty" type="number" min="1">
                        <button 
    
                        data-food-id="<%= products[i].food._id %>"
                        id="update_item"
                        style="padding: 10px;outline: none;border: none;font-size: 20px;"
                        class="mt-3">update</button>
    
    
                        </div>
                        <button data-food-id="<%= products[i].food._id %>" id="remove_item" style="padding: 10px;outline: none;border: none;background-color: red;color: #fff;font-size: 20px;">Remove From Cart</button>
                    </div>
    
                 
                    
                    
    
                    <h1><%= Number(products[i].food.price) * Number(products[i].qty) %></h1>
                </div>
        
            <% } %>

            <div style="display: flex;justify-content: space-between;margin-top: 10px;" class="summery">
                <h1>TOTAL</h1>
                <h1><%= total %></h1>
            </div>
        
            <div class="container">
                <div class="row">
                    <div class="col-md-12" style="display: flex;justify-content: center;width: 100vw;margin-top: 10px;">
                        <button id="order_btn" style="color: #fff;background-color: #000;padding: 10px;width: 80%;font-size: 20px;">Order Now</button>
                    </div>
                </div>
            </div>


        <% } %>

       
    </div>


    
    

</div>

<div style="display: none;" id="order_page">
    <div class="" style="display: flex;justify-content: space-around;width: 100%;margin-top: 20px;">
        <h1 style="font-size: 30px;">TOTAL: <%= total %></h1>
        <input id="amount" type="text" hidden value="<%= total %>" >
        <span id="back-to-cart" style="font-size: 20px;cursor: pointer;">Back To Cart</span>
    </div>
    <!-- form for order details -->
    <div class="container">
        <div class="row">
            <form class="col-md-12">
                
                <label for="name">This Ordered By (Confirm Your Name)?</label>
                <input type="text" name="" id="order_name">

                <label for="email"> Email (Email To Inform You About Your Order)?</label>
                
                <input type="email" name="" id="order_email">

                <label for="phone"> Phone Number (Phone Number To Inform You About Your Order)?</label>
                
                <input type="tel" name="" id="order_phone">

                <label for="address">Your Address</label>
                
                <input 
                type="text" name="" id="order_address">

                <select 
                style="font-size: 20px;padding: 10px;"
                id="address" class="hide">

                </select>

                <div class="state_city_zip">
                    <input id="order_state" placeholder="Your Province " type="text">
                    <input id="order_country" placeholder="Your Country" type="text">
                    <input id="order_zip_code" placeholder="Your Zip Code" type="number">
                </div>

                <input id="order_road" placeholder="Your Road" type="text">

                <div class="state_city_zip">
                    
                    <input id="order_village" placeholder="Your Village" type="text">
                    <input id="order_leisure" placeholder="Your Leisure" type="text">
                    
                </div>




            </form>

            <button id="auto_fill_btn" style="color: #fff;background-color: #000;outline: none;border: none;padding: 4px;width: 100%;font-size: 18px;display: flex;justify-content: center;align-items: center;">Fill Most Of Info Automatically</button>
            <small style="text-align: center;font-size: 15px;">Turn On Location!</small>
            <small style="text-align: center;font-size: 15px;">This Sevice May Not Working Well In The Future</small>
            <small style="text-align: center;font-size: 15px;">If This Happen You Need To Fill Your Info Manually</small>

            <p class="mt-5" style="text-align: center;border-bottom: 1px solid gray;font-size: 18px;">Choose Payment Method</p>

            <button id="pay-button" class="mt-5" id="auto_fill_btn" style="color: #fff;background-color: #000;outline: none;border: none;padding: 10px;width: 100%;font-size: 18px;display: flex;justify-content: center;align-items: center;">DANA,VIRTUAL ACCOUNT AND MORE..</button>

        </div>
    </div>
</div>



</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js" integrity="sha512-PJa3oQSLWRB7wHZ7GQ/g+qyv6r4mbuhmiDb8BjSFZ8NZ2a42oTtAq5n0ucWAwcQDlikAtkub+tPVCw4np27WCg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="./js/cart.js"></script>

</body>

</html>